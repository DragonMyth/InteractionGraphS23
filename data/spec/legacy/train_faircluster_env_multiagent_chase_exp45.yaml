run: PPO
name: exp45
local_dir: "/checkpoint/jungdam/Research/ScaDive/data/learning/multiagent/chase/"
checkpoint_freq: 100
checkpoint_at_end: true
stop: 
    time_total_s: 720000
config:
    log_level: INFO
    env: HumanoidChase
    gamma: 0.99
    lambda: 0.95
    clip_param: 0.2
    kl_coeff: 0.0
    vf_clip_param: 1000
    num_sgd_iter: 20
    lr: 0.00001
    sgd_minibatch_size: 1000
    horizon: 900
    train_batch_size: 100000
    rollout_fragment_length: 256
    grad_clip: 10
    vf_share_layers: false
    model:
        fcnet_activation: relu
        fcnet_hiddens: [256, 256]
        custom_model: fcnn_custom
        custom_options:
            log_std_type: state_independent
            sample_std: 0.2
    num_workers: 8
    num_gpus: 0
    batch_mode: truncate_episodes
    observation_filter: MeanStdFilter
    multiagent: None
    env_config:
        project_dir: /private/home/jungdam/Research/ScaDive/
        # Simulation
        fps_sim: 600
        fps_con: 30
        self_collision: true
        add_noise: false
        verbose: false
        sim_window: 120
        eoe_margin: 0.5
        # 'none', 'spd', 'pd', 'cpd', 'cp', 'v
        actuation: spd
        # 'heading', 'carry', 'dribble', 'fight', 'chase'
        task: chase
        state:
            # 'body', 'task'
            choices: ['body', 'task']
        action:
            # 'absolute', 'relative'
            type: "absolute"
            range_min: -3.0
            range_max: 3.0
            range_min_pol: -3.0
            range_max_pol: 3.0
            use_pose_embedding: option3
            pose_embedding_dim_feature: 63
            pose_embedding_dim_embedding: 8
            pose_embedding_model: data/etc/pose_embedding/walk_normal/model.pth
            pose_embedding_dataset: data/etc/pose_embedding/walk_normal/walk_normal.pkl.gzip
        reward: 
            # 'sum', 'mul'
            type: sum
            # 'pose', 'vel', 'ee', 'root', 'com', 'interaction'
            choices: []
            fn_def:
                hunter:
                    name: total
                    op: add
                    child_nodes:
                      - name: motion
                        op: add
                        weight: 2.0
                        child_nodes:
                          - name: pose_pos
                            op: leaf
                            weight: 0.8
                            kernel: 
                                type: gaussian
                                scale: 80.0
                          - name: ee
                            op: leaf
                            weight: 0.2
                            kernel: 
                                type: gaussian
                                scale: 10.0
                      - name: vel_to_prey_rel
                        op: leaf
                        weight: 1.0
                        kernel: 
                            type: gaussian
                            scale: 3.0
                      - name: out_of_ring
                        op: leaf
                        weight: 10.0
                        kernel: 
                            type: none
                      - name: falldown
                        op: leaf
                        weight: 10.0
                        kernel: 
                            type: none
                      - name: win
                        op: leaf
                        weight: 20.0
                        kernel: 
                            type: none
                prey:
                    name: total
                    op: add
                    child_nodes:
                      - name: motion
                        op: add
                        weight: 2.0
                        child_nodes:
                          - name: pose_pos
                            op: leaf
                            weight: 0.8
                            kernel: 
                                type: gaussian
                                scale: 80.0
                          - name: ee
                            op: leaf
                            weight: 0.2
                            kernel: 
                                type: gaussian
                                scale: 10.0
                      - name: vel_from_hunter_rel
                        op: leaf
                        weight: 1.0
                        kernel: 
                            type: gaussian
                            scale: 3.0
                      - name: out_of_ring
                        op: leaf
                        weight: 10.0
                        kernel: 
                            type: none
                      - name: falldown
                        op: leaf
                        weight: 10.0
                        kernel: 
                            type: none
                      - name: win
                        op: leaf
                        weight: 20.0
                        kernel: 
                            type: none
            fn_map:
                - hunter
                - prey
        early_term:
            # 'task_complete', 'falldown', 'root_fail', 'low_reward'
            choices:
                - task_complete
            falldown_contactable_body:
                - lankle
                - lknee
                - rankle
                - rknee
        character:
            char_info_module:
                - amass_char_info.py
                - amass_char_info.py
            sim_char_file:
                - data/character/amass.urdf
                - data/character/amass.urdf
            ref_motion_scale:
                - 1.0
                - 1.0
            base_motion_file:
                - data/motion/multiagent/fight/actor1.bvh
                - data/motion/multiagent/fight/actor2.bvh
            ref_motion_files: []
            environment_file:
                - data/character/ring_square.urdf