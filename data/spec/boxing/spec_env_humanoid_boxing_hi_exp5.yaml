run: DDPPO
name: exp5
local_dir: /checkpoint/jungdam/Research/ScaDive/data/learning/multiagent/boxing/hi/
checkpoint_freq: 100
checkpoint_at_end: true
stop: 
    time_total_s: 720000
config:
    env: HumanoidBoxingHierarchy
    log_level: WARN
    gamma: 0.99
    lambda: 0.95
    clip_param: 0.2
    kl_coeff: 0.0
    vf_clip_param: 10000
    num_sgd_iter: 20
    lr: 0.00002
    sgd_minibatch_size: 2000
    horizon: 900
    train_batch_size: 100000
    rollout_fragment_length: 250
    framework: "torch"
    num_envs_per_worker: 10
    num_cpus_per_worker: 10
    num_gpus_per_worker: 0
    remote_worker_envs: true
    shuffle_sequences: true
    model:
        custom_model: fcnn
        custom_model_config:
            log_std_type: constant
            sample_std: 0.1
            policy_fn_activations: ["relu", "relu", "tanh"]
    num_workers: 8
    num_gpus: 0
    batch_mode: truncate_episodes
    observation_filter: NoFilter
    multiagent: None
    env_config:
        share_policy: true
        project_dir: /private/home/jungdam/Research/ScaDive/
        base_model_config:
            custom_model: task_agnostic_policy_type1
            custom_model_config:
                log_std_type: constant
                sample_std: 0.1
                lstm_enable: false
                task_encoder_enable: false
                task_encoder_output_dim: 4
                task_encoder_activations: ["relu", "relu", "tanh"]
                body_encoder_enable: true
                body_encoder_output_dim: 16
                body_encoder_hiddens: [128, 64]
                body_encoder_activations: ["relu", "relu", "tanh"]
                body_encoder_load_weights: data/etc/pretrained_model/boxing/task_agnostic_policy_body_encoder_exp1_2000.pt
                body_encoder_learnable: false
                motor_decoder_hiddens: [64, 128]
                motor_decoder_load_weights: data/etc/pretrained_model/boxing/task_agnostic_policy_motor_decoder_exp1_2000.pt
                motor_decoder_learnable: false
        base_env_config:
            lazy_creation: true
            project_dir: /private/home/jungdam/Research/ScaDive/
            fps_sim: 480
            fps_con: 30
            self_collision: true
            add_noise: false
            verbose: false
            state:
                choices: ['body', 'game_basic', 'game_touch_avail', 'task_body']
            action:
                # 'absolute', 'relative'
                type: "absolute"
                range_min: -3.0
                range_max: 3.0
                range_min_pol: -3.0
                range_max_pol: 3.0
            reward:
                fn_def:
                    default:
                        name: default
                        op: add
                        child_nodes:
                          - name: fencing
                            op: add
                            weight: 1.0
                            child_nodes:
                              - name: out_of_arena
                                op: leaf
                                weight: -10.0
                                kernel: 
                                    type: none
                              - name: falldown
                                op: leaf
                                weight: -10.0
                                kernel: 
                                    type: none
                              - name: too_close_pos
                                op: leaf
                                weight: -10.0
                                kernel: 
                                    type: none
                              # - name: win
                              #   op: leaf
                              #   weight: 5.0
                              #   kernel: 
                              #       type: none
                              # - name: lose
                              #   op: leaf
                              #   weight: -5.0
                              #   kernel: 
                              #       type: none
                              # - name: draw
                              #   op: leaf
                              #   weight: -10.0
                              #   kernel: 
                              #       type: none
                              - name: take_score
                                op: leaf
                                weight: 1.0
                                kernel: 
                                    type: none
                              - name: lose_score
                                op: leaf
                                weight: -1.0
                                kernel: 
                                    type: none
                fn_map:
                    - default
                    - default
            early_term:
                choices:
                    # - ref_motion_end
                    - timeover
                    - gameover
                    - falldown
                    # - out_of_arena
                    # - too_close_pos
                eoe_margin: 0.0
            character:
                name:
                    - player1
                    - player2
                char_info_module:
                    - humanoid_boxing_char_info.py
                    - humanoid_boxing_char_info.py
                sim_char_file:
                    - data/character/humanoid_boxing.urdf
                    - data/character/humanoid_boxing.urdf
                ref_motion_scale:
                    - 1.0
                    - 1.0
                base_motion_file:
                    - data/motion/multiagent/boxing/player1.bvh
                    - data/motion/multiagent/boxing/player2.bvh
                ref_motion_db:
                    - data:
                        # file:
                        #     - data/motion/multiagent/boxing/player1.bvh
                        dir:
                            - data/motion/multiagent/boxing/base/
                    - data:
                        # file:
                        #     - data/motion/multiagent/boxing/player2.bvh
                        dir:
                            - data/motion/multiagent/boxing/base/
                actuation: 
                    - spd
                    - spd
                self_collision: 
                    - true
                    - true
                environment_file: []
            game:
                min_touch_force: 1.0
                type: total_score
                init_score: 1000
                duration: 30.0
                touch_interval: 0.5
                target_links:
                    - lowerneck
                    - upperneck
                    - lowerback
                    - upperback
                    - chest
                    # - lclavicle
                    # - rclavicle
                    # - lhip
                    # - lknee
                    # - lankle
                    # - rhip
                    # - rknee
                    # - rankle